I"þ<p>I bought a Mac mini some time ago and a version of OSX server to experiment with. It sits in a closet without peripherals attached and I would like to keep it that way. In fact, while I could use the mouse an keyboard from my iMac, I donâ€™t even have a monitor. And I am certainly not buying one for the mini server.</p>

<p>However since it is meant to experiment with, there is some need to reinstall the machine sometimes. While it took a little Internet research to find all information it turned out to be relatively easy. Some experience with ssh and unix commands come in helpful though.</p>

<p>Basically it these these steps:</p>

<ul>
  <li>Determine the miniâ€™s ip adress</li>
  <li>Log in with ssh</li>
  <li>Start the installation</li>
  <li>Activate Apple Remote Desktop</li>
  <li>Perform software update</li>
</ul>

<h3 id="determine-the-minis-ip-adress">Determine the miniâ€™s ip adress</h3>
<p>Make sure you have DHCP running to handout IP-addresses. Turn on the mini with the install cd loaded. Wait a few minutes, it will then have obtained an IP-address. Check in your DHCP server the last address given out.</p>

<h3 id="log-in-with-ssh">Log in with SSH</h3>
<p>When the system has started up with the install cd you can login to it with ssh root@ip-address. As password use the first eight digits from the computerâ€™s built-in hardware serial number. It will be at a label on the computer. For older computers without built-in hardware serial use 12345678. This works with XServer as well as other models. I did it with a Mac mini.</p>

<h3 id="start-the-installation">Start the installation</h3>
<p>Just assuming you would like to install the system on the same volume as before, there is no need to repartition. Also assuming you are using a single dvd version., so thereâ€™s no disk switching involved. Just start the installation with</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/usr/sbin/installer â€“verboseR â€“pkg <span class="se">\ </span>/Volumes/Mac<span class="se">\ </span>OS<span class="se">\ </span>X<span class="se">\ </span>Server<span class="se">\ </span>Install<span class="se">\ </span>Disc/System/Installation/Packages/OSInstall.mpkg <span class="nt">-target</span> /Volumes/Server/
</code></pre></div></div>

<p>The installer will locate the Package and start the installation. The progress will display in your terminal window. When finished, you will get a message saying the installation was successful.</p>

<p>Eject the install disk by issuing the following command:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>drutil eject
</code></pre></div></div>

<p>Now restart the server by issuing the following command:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shutdown <span class="nt">-r</span> now
</code></pre></div></div>

<h3 id="activate-apple-remote-desktop">Activate Apple Remote Desktop</h3>
<p>The easiest way to remotely manage the server is of course with the Server Tools. However there are situations that can be done easier with Remote Desktop, like configuring first time. Therefore we will activate ARD for root user. Just log in as you did in step 2 and on the command line type</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/System/Library/CoreServices/RemoteManagement/ARDAgent.app/Contents/Resources/kickstart <span class="se">\ </span><span class="nt">-activate</span> <span class="nt">-configure</span> <span class="nt">-access</span> <span class="nt">-on</span> <span class="nt">-users</span> root <span class="nt">-privs</span> <span class="nt">-all</span> <span class="nt">-restart</span> <span class="nt">-agent</span> â€“menu
</code></pre></div></div>

<p>Open ARD on your computer and connect to the server. Use the same username and password as for ssh. You should see Server Assistant now being open on your server. Configure the server. When you do so make sure you select ARD to enable on startup or it be disabled upon completion of the configuration.</p>

<h3 id="run-software-update">Run software update</h3>
<p>For the installation it is not necessary to do it on the command line but running software update this way is nice. Just login with ssh again, now with the user you set as administrator in Server Assistant and type:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>softwareupdate â€“i â€“r
</code></pre></div></div>

<p><em>Source: Apple Server Documentation, specifically the document on Command-Line Administration and the Excellent Tutorial from AFP548. It is a bit dated on some file locations but nothing I couldnâ€™t solve easily.</em></p>
:ET