<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta name="description" content="Linux, Macintosh, QNX Info" />
    <title>Headless Mac mini OSX Server installation</title>

    <!-- Bootstrap -->
    <link href="http://wiki.victor3d.com.br/css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
<nav class="navbar navbar-inverse" role="navigation">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <div class="navbar-brand"><img src="http://wiki.victor3d.com.br/img/classicmac.gif" width=24 height=31></div>
      <a class="navbar-brand" href="http://wiki.victor3d.com.br/">Wiki</a>
    </div>
        <form class="navbar-form navbar-left" role="search" action="https://duckduckgo.com/" method="get">
        <div class="form-group">
          <input type="text" placeholder="Search wiki" class="form-control" name="q" id="q">	
	<input type="hidden" name="sites" value="wiki.victor3d.com.br">
        </div>

        <button type="submit" class="btn btn-default">Search</button>
      </form>

  <ul class="nav navbar-nav navbar-right">
        <li><a href="http://www.google.com/recaptcha/mailhide/d?k=01MUDgC_dbbmgUXg66PjkbZg==&c=30d-wikjS5CWPbvZPBnBWhAfd39_adr_D1ylDoUa0vo=" onclick="window.open('http://www.google.com/recaptcha/mailhide/d?k=01MUDgC_dbbmgUXg66PjkbZg==&c=30d-wikjS5CWPbvZPBnBWhAfd39_adr_D1ylDoUa0vo=', '', 'toolbar=0,scrollbars=0,location=0,statusbar=0,menubar=0,resizable=0,width=500,height=300'); return false;" title="Reveal this e-mail address">E-mail</a></li>
</ul>
  </div><!-- /.container -->
</nav>
<div class="container text-center">
<iframe data-aa='326661' src='https://ad.a-ads.com/326661?size=728x90' scrolling='no' style='width:728px; height:90px; border:0px; padding:0;overflow:hidden' allowtransparency='true' frameborder='0'></iframe>
</div>
<br>
</div>

    <div class="container">

      <div class="starter-template text-center">
        <h1>Headless Mac mini OSX Server installation</h1>
      </div>

    </div><!-- /.container -->

  <div class="container">
 <div class="row">
  <div class="col-md-8 col-md-offset-2">
<p>I bought a Mac mini some time ago and a version of OSX server to experiment with. It sits in a closet without peripherals attached and I would like to keep it that way. In fact, while I could use the mouse an keyboard from my iMac, I don’t even have a monitor. And I am certainly not buying one for the mini server.</p>
<p>However since it is meant to experiment with, there is some need to reinstall the machine sometimes. While it took a little Internet research to find all information it turned out to be relatively easy. Some experience with ssh and unix commands come in helpful though.</p>
<p>Basically it these these steps:</p>
<ol>
<li>Determine the mini’s ip adress</li>
<li>Log in with ssh</li>
<li>Start the installation</li>
<li>Activate Apple Remote Desktop</li>
<li>Perform software update</li>
</ol>
<h3>Determine the mini’s ip adress</h3>
<p>Make sure you have DHCP running to handout IP-addresses. Turn on the mini with the install cd loaded. Wait a few minutes, it will then have obtained an IP-address. Check in your DHCP server the last address given out.</p>
<h3>Log in with SSH</h3>
<p>When the system has started up with the install cd you can login to it with ssh root@ip-address. As password use the first eight digits from the computer’s built-in hardware serial number. It will be at a label on the computer. For older computers without built-in hardware serial use 12345678. This works with XServer as well as other models. I did it with a Mac mini.</p>
<h3>Start the installation</h3>
<p>Just assuming you would like to install the system on the same volume as before, there is no need to repartition. Also assuming you are using a single dvd version., so there’s no disk switching involved. Just start the installation with</p>
<pre>/usr/sbin/installer –verboseR –pkg \ /Volumes/Mac\ OS\ X\ Server\ Install\ Disc/System/Installation/Packages/OSInstall.mpkg -target /Volumes/Server/</pre>
<p>The installer will locate the Package and start the installation. The progress will display in your terminal window. When finished, you will get a message saying the installation was successful.</p>
<p>Eject the install disk by issuing the following command: </p>
<pre>drutil eject</pre>
<p>Now restart the server by issuing the following command: </p>
<pre>shutdown -r now</pre>
<h3>Activate Apple Remote Desktop</h3>
<p>The easiest way to remotely manage the server is of course with the Server Tools. However there are situations that can be done easier with Remote Desktop, like configuring first time. Therefore we will activate ARD for root user. Just log in as you did in step 2 and on the command line type</p>
<pre>/System/Library/CoreServices/RemoteManagement/ARDAgent.app/Contents/Resources/kickstart \ -activate -configure -access -on -users root -privs -all -restart -agent –menu</pre>
<p>Open ARD on your computer and connect to the server. Use the same username and password as for ssh. You should see Server Assistant now being open on your server. Configure the server. When you do so make sure you select ARD to enable on startup or it be disabled upon completion of the configuration.</p>
<h3>Run software update</h3>
<p>For the installation it is not necessary to do it on the command line but running software update this way is nice. Just login with ssh again, now with the user you set as administrator in Server Assistant and type: </p>
<pre>sudo softwareupdate –i –r</pre>
<p>Source: Apple Server Documentation, specifically the document on Command-Line Administration and the Excellent Tutorial from AFP548. It is a bit dated on some file locations but nothing I couldn’t solve easily.</p>


</div></div></div>

 <br>

<div class="container text-center">
<iframe data-aa='326665' src='https://ad.a-ads.com/326665?size=468x60' scrolling='no' style='width:468px; height:60px; border:0px; padding:0;overflow:hidden' allowtransparency='true' frameborder='0'></iframe>
</div>
  <div id="footer">
      <div class="container">
        <p class="text-muted text-center">2017&copy;Victor3D</p>
      </div>
    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="http://wiki.victor3d.com.br/js/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="http://wiki.victor3d.com.br/js/bootstrap.min.js"></script>
  </body>
</html>
